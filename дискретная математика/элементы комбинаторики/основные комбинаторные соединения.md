%%# Размышления


Главу вполне рационально можно пропустить. Она полностью вдохновлена рассуждениями [Бориса Трушина](https://www.youtube.com/watch?v=OSb146CwYqA) и существует для того, чтобы объяснить природу соединений.


![[пример большого буквенного множества]]


Как оказалось, у нас есть буквенное множество. Возникает теперь вопрос, который никогда, вероятно, до этого не волновал: сколькими способами можно выбрать один элемент из этого множества? $$\fbox{?}$$

Есть три буквы, а значит, вероятно, есть три способов выбрать один элемент. $$\fbox{м}ат$$ $$м\fbox{а}т$$ $$ма\fbox{т}$$

Выбирая их поочерёдно действительно окажется, что способов всего три. Вернёмся к началу. Теперь, сколькими способами можно выбрать два элемента из этого множества? $$\fbox{?}\fbox{?}$$

По прошлому примеру ясно, если выбран один элемент, то количество элементов для соединения становится на один меньше. Для того, чтобы выбрать один элемент у нас есть всё ещё есть три способа. Так выберем. $$ма\fbox{т}$$

Теперь осталось два. Целых два способа выбрать ещё один элемент. Задача опять была сведена к своему началу. $$\fbox{м}а$$

В таком случае мы просто один раз выбрали элемент из множества с тремя элементами и ещё один раз выбрали элемент, но уже из множества с двумя элементами. Они никак не связаны. Чтобы закрепить последовательность нужно воспользоваться [[основные комбинаторные правила|правилом произведения]]: $$3 \cdot 2 = 6$$

Проверим перебором: $$\begin{array}{l} ма && ам \\ мт && тм \\ ат && та \end{array}$$

Как можно заметить, элементы переставляются. Оказалось, что таким образом мы не просто выбираем элементы, но и учитываем их порядок в соединении. Так разделим на два: $$\frac{3 \cdot 2}{2} = 3$$

Действительно, три способа. И нет никаких перестановок элементов.



Так рискнём и узнаем, сколькими способами можно выбрать все элемента? Сначала благородно распишем: $$\begin{array}{l} амт && атм \\ мат && мта \\ там && тма \end{array}$$

Шесть. А сколько уникальных без перестановок? Лишь одна.

> Избавиться от перестановок можно ровно тем же способом, каким их можно создать. Чтобы переставить один элемент в данном случае есть **три** способа (либо первый элемент, либо второй, либо третий): $$\begin{array}{l} \fbox{?}_{\ а}^{\ м} \,^т \\ \fbox{?}_{\ а}^{\ м} \,^т \\ \fbox{?}_{\ а}^{\ м} \,^т \end{array}$$
> При выборе первого элемента на вторую позицию можно выбрать **двумя** способами: $$\begin{array}{l} а\fbox{?}_{\ т}^{\ м} \\ м\fbox{?}_{\ а}^{\ т} \\ т\fbox{?}_{\ а}^{\ м} \end{array}$$
> Напоследок остаётся лишь то, что осталось, то есть, один элемент, который можно выбрать всего **одним** способом: $$\begin{array}{l} ам\fbox{т} \\ ма\fbox{т} \\ та\fbox{м} \end{array}$$
> Итак, как переставить все три элемента? Правило произведения: $$3 \cdot 2 \cdot 1 = 6$$
> Сейчас вы любезно встретились с [[факториал|факториалом]] $n!$, где $n = 3$. Он всей своей сущностью отождествляется с формулой _перестановки_ $P_3$.
> 
> Ну а пока вы не оглохли от громкости, с которой факториал выкрикивает числа, вернёмся к выбору трёх элементов.


Таким образом, формула для трёх элементов выглядит вот так: $$\frac{3 \cdot 2 \cdot 1}{3 \cdot 2 \cdot 1} = 1$$

Так же, оказывается, выглядит формула сочетания $C_3^3$.

Считайте, комбинаторные соединения **соединяют** элементы из множества по определённым правилам. Далее идёт перечисление этих правил.

%%
# Размещение


> [!note] Определение размещения — $A$
>
> ---
_Размещением_ из $n$ по $k$ называется $k$-элементное упорядоченное подмножество $n$-элементного множества.

Предположим, что имеется $n$-элементное множество. Из элементов этого множества составляются $k$-членные комбинации (соединения) $k \leq n$, отличающиеся друг от друга как **порядком** следования элементов, так и **составом** элементов. Причём каждый из $n$ элементов может входить в соединение не более одного раза. Такой тип комбинации называется _размещением_.

Число размещений из $n$ элементов по $k$ вычисляется по формуле:

## Число размещений без повторений

> [!note] Число размещений без повторений — $A_n^k$
> 
> ---
> $$A_{n}^{k} = n(n - 1)(n - 2) \ \dots \ (n - (k - 1))$$ 
> > [!question] Доказательство
> > $$\begin{array}{l} Пусть \ k = 1: \\ \qquad \text{Выбрать 1 элемент из $n$ можно $n$ способами. Поэтому:} \\ \qquad A_{n}^{1} = n \\ Пусть \ k = 2: \\ \qquad \text{По правилу произведения элемент $n$ можно выбрать $n$ способами, а $n - 1$ $(n - 1)$ способами:} \\ \qquad A_{n}^{2} = n(n - 1) \\ \text{Рассуждая аналогично, получим, что: } \\ \qquad A_{n}^{3} = n(n - 1)(n - 2) \\ \qquad  \ \dots \  \\ \qquad A_{n}^{k} = n(n - 1)(n - 2) \ \dots \ (n - (k - 1)) \end{array}$$ 
> 
> $$Следствие: \\ A_{n}^{k} = \frac{n!}{(n - k)!}$$
> > [!question] Доказательство
> > Если элементы размещения не могут повторяться, то число способов: $$A_{n}^{k} = n(n - 1)(n - 2) \ \dots \ (n - (k - 1))$$
> > Умножим и разделим эту формулу на $(n - k)!$ : $$A_{n}^{k} = \frac{n(n - 1)(n - 2) \ \dots \ (n - (k - 1)) \cdot (n - k)!}{(n - k)!} = \frac{n!}{(n - k)!}$$


См. [[факториал]]

### Примеры


![[пример большого буквенного множества]]


Например, есть размещение из семи по два: $$A_7^2 \subset L, \ A_7^2 = \begin{array}{l} \{(в,г),(в,л),(в,н),(в,р),(в,ф),(в,ц),\\ \ \ (г,в),(г,л),(г,н),(г,р),(г,ф),(г,ц),\\ \ \ (л,в),(л,г),(л,н),(л,р),(л,ф),(л,ц),\\ \ \ (н,в),(н,г),(н,л),(н,р),(н,ф),(н,ц),\\ \ \ (р,в),(р,г),(р,л),(р,н),(р,ф),(р,ц),\\ \ \ (ф,в),(ф,г),(ф,л),(ф,н),(ф,р),(ф,ц),\\ \ \ (ц,в),(ц,г),(ц,л),(ц,н),(ц,р),(ц,ф)\} \end{array}$$


Здесь 42 элемента. Действительно, по формуле размещения без повторений получается: $$A_{7}^{2} = \frac{7!}{(7 - 2)!} = \frac{5! \cdot 6 \cdot 7}{5!} = 6 \cdot 7 = 42$$

## Число размещений с повторениями

Предположим, что имеется $n$-элементное множество. Из элементов этого множества составляют $k$-членные комбинации, допускающие повторения каждого элемента от $0$ до $k$ раз. Такие соединения называется размещения с повторениями.

> [!note] Число размещений с повторениями — $\overline{A_{n}^{k}}$
> 
> ---
> $$\overline{A_{n}^{k}} = n^{k}$$
> > [!question] Доказательство
> > В размещении с повторениями из $n$ по $k$ есть $k$ мест и на каждом месте может быть один из $n$ элементов. Следовательно, по правилу произведения число размещений из $n$ по $k$ можно выбрать $k$ способами.


### Примеры


![[пример большого буквенного множества]]


Например, есть размещение с повторениями из семи по два: $$\overline{A_7^2} \subset L, \ \overline{A_7^2} = \begin{array}{l} \{(в,в),(в,г),(в,л),(в,н),(в,р),(в,ф),(в,ц),\\ \ \ (г,в),(г,г),(г,л),(г,н),(г,р),(г,ф),(г,ц),\\ \ \ (л,в),(л,г),(л,л),(л,н),(л,р),(л,ф),(л,ц),\\ \ \ (н,в),(н,г),(н,л),(н,н),(н,р),(н,ф),(н,ц),\\ \ \ (р,в),(р,г),(р,л),(р,н),(р,р),(р,ф),(р,ц),\\ \ \ (ф,в),(ф,г),(ф,л),(ф,н),(ф,р),(ф,ф),(ф,ц),\\ \ \ (ц,в),(ц,г),(ц,л),(ц,н),(ц,р),(ц,ф),(ц,ц)\} \end{array}$$


Выходит 49 элементов. Проверить можно по формуле размещения с повторениями: $$\overline{A_{7}^{2}} = 7^2 = 49$$


# Перестановки


> [!note] Определение перестановки — $P$
> 
> ---
> _Перестановкой_ из $n$ элементов называется $n$-элементное упорядоченное множество.


## Число перестановок без повторений


Размещения из $n$ элементов, отличающихся друг от друга порядком следования элементов, называются перестановками из $n$ элементов.

Считается, что элементы в подмножествах не повторяются. Количество всевозможных перестановок $n$-элементного множества обозначают $P_n = A_n^k = n!$.


> [!note] Число перестановок без повторений — $P_n$
> 
> ---
> $$P_{n} = n!$$
> > [!question] Доказательство
> > Перестановки являются частным случаем размещений: $$P_{n} = A_{n}^{k} = \frac{n!}{(n - k)!} = \frac{n!}{0!} = n!$$


### Примеры


![[пример маленького буквенного множества]]


Например, есть перестановка без повторений из трёх элементов: $$P_3 = \{(а,м,т),(а,т,м),(м,а,т),(м,т,а),(т,а,м),(т,м,а)\} = 6$$ 


Действительно, $3! = 1 \cdot 2 \cdot 3 = 6$.


## Число перестановок с повторениями


В тех случаях, когда среди образующих элементов перестановки имеются одинаковые элементы, получаются соединения, называемые перестановками с повторениями.

Таким образом, перестановки с повторениями длины $n$, в котором элемент $a_1$ входит $n_1$ раз, элемент $a_2$ входит $n_2$ раз, и так далее, $a_k$ входит $n_k$ раз. Причём $n = n_1 + n_2 +  \ \dots \  + n_k, \quad k \leq n$.

> [!note] Число перестановок с повторениями — $\overline{P_n}$
> 
> ---
> $$P_{n}(n_1,n_2, \ \dots \ ,n_k) = \frac{n!}{n_1! \ n_2! \ \dots \ n_k!}, \quad k \le n$$
> > [!question] Доказательство
> По правилу произведения:$$P(n_1,n_2, \ \dots \ ,n_k) = C_{n}^{n_1} \cdot C_{n - n_1}^{n_2} \cdot  \ \dots \  \cdot C_{n - n_1 -  \ \dots \  - n_{k-1}}^{n_k} =$$ $$= \frac{n!}{n!(n - n_1)!} \cdot \frac{(n - n_1)!}{n_2 \cdot (n - n_1 - n_2)!} \cdot  \ \dots \  \cdot \frac{n - n_1 -  \ \dots \  - n_{k - 1}}{n_k! \cdot (n - n_1 -  \ \dots \  - n_{k - 1})} =$$ $$= \frac{n!}{n_1!n_2!  \ \dots \  n_k!}$$


# Сочетания

> [!note] Определение сочетания — $C$
> 
> ---
> _Сочетанием_ из $n$ по $k$ называется $k$-элементное подмножество $n$-элементного множества.


## Число сочетаний без повторений


Пусть имеется $n$-элементное множество $k$-членных комбинаций, $k \leq n$, различающихся только составом элементов, называется сочетаниями из $n$ по $k$ элементов.


> [!note] Число сочетаний без повторений
> 
> ---
> $$C_{n}^{k} = \frac{n!}{k!(n - k)!}$$
> > [!question] Доказательство
> > Подсчитаем число всех сочетаний из $n$ по $k$ элементов. Сначала образуем всевозможные неупорядоченные подмножества, содержащие $k$ элементов. Их число $C_{n}^{k}$. Затем из каждого подмножества перестановкой его элементов получим все упорядоченные подмножества из $k$ элементов, которых будет в $k!$ раз больше, т.к. каждое $k$-элементное множество можно упорядочить $k!$ способами $\implies$ $$A_{n}^{k} = C_{n}^{k} \cdot P_{k}$$ $$A_{n}^{k} = C_{n}^{k} \cdot k!$$ $$C_{n}^{k} = \frac{A_{n}^{k}}{k!} = \frac{n!}{k!(n - k)!}$$


## Число сочетаний с повторениями


Сочетаниями с повторениями из $n$ элементов по $k$ элементов называются такие соединения, которые включают $k$ из $n$, различающиехся между собой элементами при условии, что одни и те же элементы могут включаться в комбинации несколько раз.

> [!note] Число сочетаний с повторениями
> 
> ---
> $$\overline{C_{n}^{k}} = P_{k, \ n - 1} = \frac{(k + n - 1)!}{k!(n - 1)!}$$ Каждому сочетанию с повторениями из $n$ по $k$ соответствует последовательность из $k$ единиц и $n-1$ нули и наоборот по каждой такой последовательности восстанавливается однозначно сочетания с повторениями из $n$ по $k$, поэтому число сочетаний с повторениями из $n$ по $k$ = числу перестановок с повторениями $k$ единиц и $n-1$ нули, т.е. выполняется исходная формула.
> $$Следствие: \ \overline{C_{n}^{k}} = C_{n + k - 1}^{n - 1} = C_{n + k - 1}^{k}$$